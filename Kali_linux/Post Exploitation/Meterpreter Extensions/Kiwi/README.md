# Kiwi = Mimikatz 실습 실패에 대한 정리
공격자들이 주로 사용하는 몇가지 유용한 태스크들을 몇가지 묶어놓은 툴. Metasploit에는 Mimikatz가 meterpreter script로 포함되어 있다.  
마찬가지로 meterpreter shell을 얻은 후에 진행한다.  
Mimikatz가 제대로 동작하려면 세션은 항상 시스템 레벨 권한에서 에서 실행되고 있어야 한다!   

### 기본 준비
![img](https://github.com/arad4228/2021_winter/blob/main/Kali_linux/Post%20Exploitation/Meterpreter%20Extensions/Kiwi/Source/%EA%B8%B0%EB%B3%B8%EC%A4%80%EB%B9%84.png)  
위의 사진과 같이 shell을 얻은다음 진행을 시작한다.  
이후 **getuid**  
**getsystem**  
System user가 아니면 입력한다.
**load mimikatz** = **load kiwi**  
**help kiwi**  
![img](https://github.com/arad4228/2021_winter/blob/main/Kali_linux/Post%20Exploitation/Meterpreter%20Extensions/Kiwi/Source/mimikatz%20kiwi.png)  
Mimikatz가 실습 시점에는 kiwi로 변경되어 명령어 역시 실습시점의 명령어와 달라졌다.  

**mimikatz_command -f abc::** = **kiwi_cmd ..**  
![img](https://github.com/arad4228/2021_winter/blob/main/Kali_linux/Post%20Exploitation/Meterpreter%20Extensions/Kiwi/Source/kiwi_cmd%20-f%20%20%EC%97%90%EB%9F%AC.png)  
현재 mimikatz_command가 아닌 help를 통해 확인한 비슷한 작업을 하는 kiwi_cmd를 통해 실습을 진행하려고 함.  

**kiwi_cmd -f ..**  
**kiwi_cmd sandump::hashs**  
![img](https://github.com/arad4228/2021_winter/blob/main/Kali_linux/Post%20Exploitation/Meterpreter%20Extensions/Kiwi/Source/kiwi_cmd%20%EC%84%A4%EC%A0%95(%EC%95%84%EB%A7%88).png)

**kiwi_cmd sekurlsa:: ..**  
**kiwi_cmd sekurlsa::hashes**  
이 모듈은 있지만 이역시 내부의 실행하는 것들이 전부 달라졌다.  
![img](https://github.com/arad4228/2021_winter/blob/main/Kali_linux/Post%20Exploitation/Meterpreter%20Extensions/Kiwi/Source/kiwi_cmd%20%EC%84%A4%EC%A0%95%20sekurlsa.png)  

이후 windowXp의 내장게임인 mine을 시도
**kiwi_cmd winmine::**  
**kiwi_cmd winmine::info**  
이역시 위와 마찬가지인 상황이 나와 진행이 안된다.  
따라서 내부 모듈의 변경점등은 추후 인터넷을 통해 찾아 봐야할 것으로 생각된다.  
